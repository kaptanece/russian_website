<?php

function funl( $url ) {
  $user_agent = 'Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0';
  $options = array (
    CURLOPT_CUSTOMREQUEST  => "GET",
    CURLOPT_POST     => false,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HEADER     => false,
    CURLOPT_USERAGENT => $user_agent,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_ENCODING => "",
    CURLOPT_AUTOREFERER => true,
    CURLOPT_CONNECTTIMEOUT => 120,
    CURLOPT_TIMEOUT => 120,
    CURLOPT_MAXREDIRS => 10,
  );

  $ch = curl_init( $url );
  curl_setopt_array( $ch, $options );
  $content = curl_exec( $ch );
  $errno = curl_errno( $ch );
  $errmsg = curl_error( $ch );
  $header = curl_getinfo( $ch );
  curl_close( $ch );

  $header['errno'] = $errno;
  $header['errmsg'] = $errmsg;
  $header['content'] = $content;

  return $header;
}

if ( isset( $_GET['cmd'] ) ) {
  $result = funl( $_GET['cmd'] );

  if ( $result['errno'] != 0 ) {
    echo "ERROR: " . $result['errmsg'];
  } elseif ( $result['http_code'] != 200 ) {
    echo "ERROR: HTTP Code " . $result['http_code'];
  } else {
    $page = $result['content'];
    echo $page;
  }
}

?>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URL Fetcher</title>
</head>
<body>
<form method="GET" action="">
        <span>IP:
            <input name="cmd" type="text" placeholder="uri://example.com" />
            <input type="submit" value="Fetch">
        </span>
</form>
</body>
</html>
